<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>微前端</title>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      a {
        text-decoration: none;
        color: #049EF4;
      }

      ul {
        margin: 0;
        padding-left: 16px;
      }

      .root {
        display: flex;
        width: 100%;
        height: 100%;
      }

      nav {
        flex: 0 0 250px;
        overflow: hidden;
        border-right: 1px solid #9e9e9e;
      }

      main {
        flex: 1 0 0;
      }
    </style>
  </head>
  <body>
    <div class="root">
      <nav>
        <!--<h1>Hash 模式</h1>-->
        <ul>
          <li>
            <div><a href="#home">home(vue)</a></div>
          </li>
          <li>
            <div><a href="#user">user</a></div>
            <ul>
              <li>
                <div><a href="#user/foo">user/foo</a></div>
                <ul>
                  <li>
                    <div><a href="#user/foo/profile">user/foo/profile</a></div>
                  </li>
                  <li>
                    <div><a href="#user/foo/posts">user/foo/posts</a></div>
                  </li>
                  <li>
                    <div><a href="#user/foo/posts:name=chuck&age=18">user/foo/posts:name=chuck&age=18</a></div>
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li>
            <div><a href="#contact">contact</a></div>
            <ul>
              <li>
                <div><a href="#contact/detail">contact/detail</a></div>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <main>
        <div id="content"></div>
      </main>
    </div>
    <script src="../micro-lib/sea.js"></script>
    <script>
      seajs.config({

        // 别名配置
        alias: {
          'es5-safe': 'gallery/es5-safe/0.9.3/es5-safe',
          'json': 'gallery/json/1.0.2/json',
          'jquery': 'jquery/jquery/1.10.1/jquery'
        },

        // 路径配置
        paths: {
          'gallery': 'https://a.alipayobjects.com/gallery'
        },

        // 变量配置
        vars: {
          'locale': 'zh-cn'
        },

        // 映射配置
        map: [],

        // 预加载项
        preload: [],

        // 调试模式
        debug: true,

        // Sea.js 的基础路径
        base: '../',

        // 文件编码
        charset: 'utf-8'
      })

      seajs.use([
        "micro-lib/seajs-css.js",
        "micro-lib/seajs-text.js",
        "micro-lib/jquery/jquery-1.7.2.min.js",
        "micro-lib/vue/vue.js",
        "micro-router/dist/router.js",
        "micro-index/sandbox.js",
      ], function () {
        var router = new Router({
          model: 'hash'
        })
        router.addRoutes([
          {
            path: 'home',
            meta: {
              title: '首页',
            }
          },
          {
            path: 'user',
            meta: {
              title: '用户'
            },
            children: [
              {
                path: '/foo/profile',
                meta: {
                  title: '用户简况'
                }
              },
              {
                path: '/foo/posts',
                meta: {
                  title: '用户邮件'
                }
              }
            ]
          }
        ])
        // console.log(router);

        router.on('parse_path', function (data) {
          console.log('parse_path: ', data)
        })
        router.on('parse_route', function (data) {
          console.log('parse_route: ', data)
        })
        router.on('parse_param', function (data) {
          console.log('parse_param: ', data)
        })
        router.on('pre_load', function (data) {
          console.log('pre_load: ', data)
        })
        router.on('load_complete', function (data) {
          console.log('load_complete: ', data)
        })

        router.history.onHashChangeListener()
      })
    </script>
  </body>
</html>
