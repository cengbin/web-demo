<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Title</title>
  </head>
  <body>
    <script>
      // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp
      // https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions

      (function () {
        let formattingTokens = /([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?)/g;

        function moment (format) {

          let date = new Date();
          var o = {
            "Y": date.getFullYear(),                 //年份
            "M": date.getMonth() + 1,                 //月份
            "D": date.getDate(),                    //日
            "h": date.getHours(),                   //小时
            "m": date.getMinutes(),                 //分
            "s": date.getSeconds(),                 //秒
            "q": Math.floor((date.getMonth() + 3) / 3), //季度
            "S": date.getMilliseconds()             //毫秒
          };

          format = format.replace(formattingTokens, function (val) {
            // console.log('val:', val)
            let newVal = ''
            switch (val) {
              case 'YYYY':
                newVal = o.Y
                break;
              case 'MM':
                newVal = o.M
                break;
              case 'DD':
                newVal = o.D
                break;
              case 'hh':
                newVal = o.h
                break;
              case 'mm':
                newVal = o.m
                break;
              case 'ss':
                newVal = o.s
                break;
            }
            return newVal;
          })
          return format;
          // makeFormatFunction(format)
        }

        console.log(moment('YYYY/MM/DD'));
        console.log(moment('hh:mm:ss'));
        console.log(moment('YYYY/MM/DD hh:mm:ss'));
        console.log(moment('____ YYYY/MM/DD hh:mm:ss ___'));

        function makeFormatFunction (format) {
          let array = format.match(formattingTokens), i, length;
          // console.log('array:', array);

          for (i = 0; i < array.length; i++) {
            console.log(`array[${i}]:${array[i]}`);
          }
        }

        /**
         * number 当前数字
         * targetLength 数字总长度
         * forceSign 是否在数字前显示正负符号
         * */
        function zeroFill (number, targetLength, forceSign) {
          var absNumber = '' + Math.abs(number),
            zerosToFill = targetLength - absNumber.length,
            sign = number >= 0;
          return (sign
              ? (forceSign ? '+' : '')
              : '-'
          ) + Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
        }

        // console.log(zeroFill(1, 3, 0))
        // console.log(zeroFill(1, 3, 1))
        // console.log(zeroFill(-1, 3, 1))

        // token:    'M'
        // padded:   ['MM', 2]
        // ordinal:  'Mo'
        // callback: function () { this.month() + 1 }
        function addFormatToken (token, padded, ordinal, callback) {
          var func = callback;
          if (typeof callback === 'string') {
            func = function () {
              return this[callback]();
            };
          }
          if (token) {
            // formatTokenFunctions[token] = func;
          }
          if (padded) {
            // formatTokenFunctions[padded[0]] = function () {
            //   return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
            // };
          }
          if (ordinal) {
            // formatTokenFunctions[ordinal] = function () {
            //   return this.localeData().ordinal(func.apply(this, arguments), token);
            // };
          }
        }

        addFormatToken('Y', 0, 0, function () {
          var y = this.year();
          return y <= 9999 ? '' + y : '+' + y;
        });

        addFormatToken(0, ['YY', 2], 0, function () {
          return this.year() % 100;
        });

        addFormatToken(0, ['YYYY', 4], 0, 'year');
        addFormatToken(0, ['YYYYY', 5], 0, 'year');
        addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');


      }());
    </script>
  </body>
</html>