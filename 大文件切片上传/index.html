<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Title</title>
  </head>
  <body>
    <input type="file" onchange="onChange(this.files)" multiple/>

    <script>
      // 自己实现一个大文件切片上传+断点续传 https://mp.weixin.qq.com/s/SyP0zUsRHsTDyEQoab4fXg
      function onChange(files) {
        Array.from(files).forEach((file, index) => {
          let f = file
          console.log(
            `file ${index}:`,
            f.name, // 文件名，不含路径
            f.size, // 文件大小，Blob 实例属性
            f.type, // 文件类型，Blob 实例属性
            f.lastModifiedDate // 文件的最后修改时间
          )

          let reader = new FileReader()
          reader.readAsArrayBuffer(f)
          reader.onload = function () {
            let buffer = reader.result
            // let size = 1 * 1024 // 1kb
            let size = 1 * 1024 * 1024 // 1MB
            let length = Math.ceil(buffer.byteLength / size)

            for (let i = 0; i < length; i++) {
              let start = i * size
              let end = start + size
              console.log(`${f.name} slice ${i}:`, buffer.slice(start, end))
            }
          }
          reader.onerror = function (e) {
            console.log('Error', e)
          }
        })
      }
    </script>
  </body>
</html>